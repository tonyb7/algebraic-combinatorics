% Monday 2.19
\begin{itemize}
    \item \(\mathbb{C}[[x]]\): ring of formal power series
    \[ \sum_{n\geq0}a_n x^n \]
    addition, multiplication are as for analytic functions, also a notion of composition.
    \item \(A\in\mathbb{C}[[x]]\) is invertible \iff \(A(0)\neq0\).
    \item \(A\in\mathbb{C}[[x]]\) with \(A(0)=0\) has a compositional inverse \iff \(\left[x^1\right]A(x)\neq0\).
\end{itemize}

\section{Formal Laurent series}
\begin{definition}[formal Laurent series]
Let \(\mathbb{C}((x))\) denote the field of formal Laurent series (in one variable), \textit{i.e.}, power series of the form
\[ \sum_{n\geq k}a_n x^n \qquad (a_n\in\mathbb{C}) \]
for some \(k\in\Z\) with the expected addition and multiplication.
Note htat indeed every nonzero formal Laurent series \(f\) has an inverse:
we can write
\[ f= x^k\cdot g \]
where \(g\in\mathbb{C}[[x]]\) is a formal power series with \(g(0)\neq0\).
We know \(g^{-1}\in\mathbb{C}[[x]]\), so
\[ f^{-1}=x^{-k}\cdot g^{-1}\in\mathbb{C}((x)) \]
That is, \(\mathbb{C}((x))\) is the field of fractions of \(\mathbb{C}[[x]]\).
\end{definition}

\subsection{Derivatives}
\begin{definition}[derivative]
For
\[ f=\sum_{n\geq k}f_n x^n\in\mathbb{C}((x)), \]
define its derivative
\[ f'\coloneqq\sum_{n\geq k}nf_n x^{n-1}\in\mathbb{C}((x)), \]
\end{definition}
The key observation for proving Lagrange's theorem is that
\[ \left[x^{-1}\right]f'=0 \quad \forall f\in\mathbb{C}((x)) \]
Let's see to recover the usual properties of the derivative.
For example, the product rule
\[ (fg)'=f'g+fg' \]
Since this equation is linear in \(f\) and \(g\), it suffices to prove it where \(f=x^l\) and \(g=x^m\).
Then it reduces to
\[ \left(x^{l+m}\right)'=x^l\left(x^m\right)'+\left(x^l\right)'x^m \]
where we can verify explicitly.
Applying the product rule \(n-1\) times \(n\geq1\) we obtain
\[ \left(f^n\right)'=nf^{n-1}f' \]
for positive \(n\).
If \(n\) is negative, we obtain the power rule from the equation
\[ 0=\left(f^n f^{-n}\right)'=f^n\left(f^{-n}\right)'+\left(f^n\right)'f^{-n} \]
This proves the power for all \(n\in\Z\).
Note that this immediately implies the chain rule
\[ \left(f(A(x))\right)'=f'(A(x))A'(x) \qquad \forall A\in\mathbb{C}[[x]],A(0)\neq0,f\in\mathbb{C}((x)) \]
This is because chain rule is linear in \(f\) and it reduces to the power rule when \(f=x^n\).

\section{Lagrange's theorem}
\begin{theorem}[Lagrange implicit function theorem/Lagrange inversion formula]
Suppose that \(\phi\in\mathbb{C}[[x]]\) with \(\phi(0)\neq0\).
then there exists a unique \(A\in\mathbb{C}[[x]]\) with
\[ A(x)=x\phi(A(x)) \]
for any \(f\in\mathbb{C}((x))\) and \(n\neq0\),
\[ \left[x^n\right]f(A(x))=\frac{1}{n}\left[x^{n-1}\right]f'(x)\phi^n(x) \]
If \(f(x)=x\), this states
\[ \left[x^n\right]A(x)=\frac{1}{n}\left[x^{n-1}\right]\phi^n(x) \]
\end{theorem}

To prove this theorem, we need the following lemma.
\begin{lemma}[Residue composition]
\label{residue composition}
Let \(A\in\mathbb{C}[[x]]\), where
\[ A(x)=\sum_{n\geq k}a_n x^n \quad \text{where } k\geq1 \text{ and } a_k\neq0 \]
then for any \(f\in\mathbb{C}((x))\),
\[ \left[x^{-1}\right]f(x)=\frac{1}{k}\left[x^{-1}\right]f(A(x))\cdot A'(x) \]
\end{lemma}
\begin{proof}[Proof of lemma]
Since the equation is linear in \(f\), it suffices to prove it when \(f=x^n,n\in\Z\).
We want to prove
\[ \frac{1}{k}\left[x^{-1}\right]A^n(x)\cdot A'(x)\begin{cases} 1 & \text{if } n=-1 \\ 0 & \text{if } n\neq-1\end{cases} \]
\begin{itemize}
\item If \(n\neq-1\), then
\[ \left[x^{-1}\right]A^n(x)\cdot A'(x)=\left[x^{-1}\right]\frac{\left(A^{n+1}(x)\right)'}{n+1}=0 \]
\item If \(n=-1\), then write
\[ A(x)=x^k\cdot B(x) \quad \text{where } B\in\mathbb{C}[[x]], B(0)\neq0 \]
\end{itemize}
Then \(B^{-1}(x)\in\mathbb{C}[[x]]\).
We have
\begin{align*}
\left[x^{-1}\right]A^{-1}(x)\cdot A'(x)&=\left[x^{-1}\right]\left(x^kB(x)\right)^{-1}\left(x^kB(x)\right)'\\
&=\left[x^{-1}\right]x^{-k}B^{-1}(x)\left[x^kB'(x)+kx^{k-1}B(x)\right]\\
&=\left[x^{-1}\right](\underbrace{B^{-1}(x)B'(x)}_{\in\mathbb{C}[[x]]}+kx^{-1})=0+k=k
\end{align*}
\end{proof}

\begin{proof}[Proof of Lagrange theorem]
Since \(\phi(0)\neq0\), \(\phi^{-1}\in\mathbb{C}[[x]]\).
Let
\[ B(x)\coloneqq x\phi^{-1}(x)\in\mathbb{C}[[x]] \]
Note that the equation \(A(x)=x\phi(A(x))\) is just \(B(A(x))=x\).
So the unique \(A\) is the compositional inverse of \(B\).
Moreover, \(A(B(x))=0\).
For \(n\neq0\),
\begin{align*}
\left[x^n\right]f(A(x))&=\left[x^{-1}\right]x^{-n-1}f(A(x))\\
&=\frac{1}{1}\left[x^{-1}\right]B^{-n-1}(x)f(\underbrace{A(B(x))}_{x})B'(x) \tag{Lemma \ref{residue composition} with \(k=1\)}\\
&=\left[x^{-1}\right]f(x)\cdot\frac{\left(B^{-n}(x)\right)'}{-n}
\end{align*}
Note that \(\left[x^{-1}\right]p(x)q(x)=0\implies\left[x^{-1}\right]p(x)q'(x)=-\left[x^{-1}\right]p'(x)q(x)\)
Then,
\begin{align*}
\left[x^{-1}\right]f(x)\cdot\frac{\left(B^{-n}(x)\right)'}{-n}&=\frac{1}{n}\left[x^{-1}\right]f'(x)\left(x\phi^{-1}(x)\right)^{-n}\\
&=\frac{1}{n}\left[x^{-1}\right]f'(x)x^{-n}\phi^n(x)\\
&=\frac{1}{n}\left[x^{n-1}\right]f'(x)\phi^n(x)
\end{align*}
\end{proof}


\begin{example}[special series]
Consider the formal power series with \(x\in\mathbb{C}\)
\begin{align*}
    \mathcal{E}(x)&\coloneqq\sum_{n\geq0}\frac{x^n}{n!}\\
    \lambda(x)&\coloneqq\sum_{n\geq1}\frac{x^n}{n}\\
    B_{\alpha}(x)&\coloneqq\sum_{n\geq0}\binom{\alpha}{n}x^n
\end{align*}
We can show that \(\mathcal{E},\lambda,B_\alpha\) satisfy the usual properties of \(e^x\), \(-\log(1-x)\) and \((1+x)^\alpha\), \textit{e.g.},
\begin{align*}
\mathcal{E}(x+y)&=\mathcal{E}(x)\mathcal{E}(y)\\
\mathcal{E}'(x)&=\mathcal{E}(x)\\
\lambda(1-\mathcal{E}(-x))&=x\\
B_{\alpha+\beta}(x)&=B_\alpha(x)B_\beta(x)
\end{align*}
So we will just denote these by
\[ e^x \quad -\log(1-x) \quad (1+x)^\alpha \]
We can prove these identies directly, or use the following shortcut: if \(f,g\) analytic power series and there exists \(r>0\) such that
\[ f(z)=g(z) \qquad |z|<r \]
then
\[ \left[x^n\right]f(x)=\left[x^n\right]g(x) \qquad \forall n\in\N \]
This follows by taking the derivative of \(f(z)=g(z)\) \(n\) times and set \(z=0\).
(And this works in multivariables.)
\end{example}

